From fedd1259e47a6f6cb97bce8c9bf31eeb261b93be Mon Sep 17 00:00:00 2001
From: Francois Perrad <francois.perrad@gadz.org>
Date: Sat, 27 Jul 2019 15:26:26 +0200
Subject: [PATCH] allow libluajit detection

This detection was done only if luarocks is runned by luajit.
But on Buildroot, luarocks is always runned by lua.

See https://github.com/luarocks/luarocks/pull/883

Signed-off-by: Francois Perrad <francois.perrad@gadz.org>
---
 src/luarocks/deps.lua | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/src/luarocks/deps.lua b/src/luarocks/deps.lua
index cb85764..02cdda6 100644
--- a/src/luarocks/deps.lua
+++ b/src/luarocks/deps.lua
@@ -555,10 +555,8 @@ function deps.check_lua_libdir(vars)
       "lua-" .. cfg.lua_version,
       "lua-" .. shortv,
       "lua",
+      "luajit-" .. cfg.lua_version,
    }
-   if ljv then
-      table.insert(libnames, 1, "luajit-" .. cfg.lua_version)
-   end
    local cache = {}
    for _, libname in ipairs(libnames) do
       local ok = check_external_dependency("LUA", { library = libname }, vars, "build", cache)
-- 
2.20.1

