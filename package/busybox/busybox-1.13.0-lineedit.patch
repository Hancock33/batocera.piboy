--- busybox-1.13.0/libbb/lineedit.c	Wed Nov  5 22:39:54 2008
+++ busybox-1.13.0-lineedit/libbb/lineedit.c	Wed Nov 12 23:18:05 2008
@@ -1415,8 +1415,10 @@
 	if ((state->flags & SAVE_HISTORY) && state->hist_file)
 		load_history(state->hist_file);
 #endif
+#if MAX_HISTORY > 0
 	if (state->flags & DO_HISTORY)
 		state->cur_history = state->cnt_history;
+#endif
 
 	/* prepare before init handlers */
 	cmdedit_y = 0;  /* quasireal y, not true if line > xt*yt */
