diff --git a/src/gui/sdlmain_linux.cpp b/src/gui/sdlmain_linux.cpp
index b22e987a8..1bba726f6 100644
--- a/src/gui/sdlmain_linux.cpp
+++ b/src/gui/sdlmain_linux.cpp
@@ -24,6 +24,7 @@
  * window resizes, or is resized by the user, the more likely it can occur.
  *
  * This can happen at any time. */
+#if C_X11
 int X11_ErrorHandler(Display *disp,XErrorEvent *xev) {
 	char errmsg[512];
 
@@ -41,6 +42,7 @@ int X11_ErrorHandler(Display *disp,XErrorEvent *xev) {
 
 	return 0; // ignored anyway
 }
+#endif
 
 void X11_ErrorHandlerInstall(void) {
 	XSetErrorHandler(X11_ErrorHandler);
