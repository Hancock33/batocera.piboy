diff -Naur mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bgfx/src/renderer_gl.h mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bgfx/src/renderer_gl.h
--- mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bgfx/src/renderer_gl.h	2021-08-30 16:29:15.000000000 +0100
+++ mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bgfx/src/renderer_gl.h	2021-08-30 21:32:52.799543951 +0100
@@ -13,10 +13,12 @@
 	|| BX_PLATFORM_NX                                     \
 	|| BX_PLATFORM_RPI                                    \
 	|| BX_PLATFORM_WINDOWS                                \
+    || BX_PLATFORM_LINUX_NO_GL                            \
 	) )
 
 #define BGFX_USE_HTML5 (BGFX_CONFIG_RENDERER_OPENGLES && (0 \
 	|| BX_PLATFORM_EMSCRIPTEN                               \
+	|| BX_PLATFORM_LINUX_NO_GL \	
 	) )
 
 #define BGFX_USE_WGL (BGFX_CONFIG_RENDERER_OPENGL && (0 \
diff -Naur mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bx/include/bx/platform.h mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bx/include/bx/platform.h
--- mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bx/include/bx/platform.h	2021-08-30 16:29:15.000000000 +0100
+++ mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bx/include/bx/platform.h	2021-08-30 21:39:07.547185419 +0100
@@ -60,6 +60,7 @@
 #define BX_PLATFORM_WINDOWS    0
 #define BX_PLATFORM_WINRT      0
 #define BX_PLATFORM_XBOXONE    0
+#define BX_PLATFORM_LINUX_NO_GL 0
 
 // http://sourceforge.net/apps/mediawiki/predef/index.php?title=Compilers
 #if defined(__clang__)
@@ -269,6 +270,7 @@
 	||  BX_PLATFORM_OSX        \
 	||  BX_PLATFORM_PS4        \
 	||  BX_PLATFORM_RPI        \
+	||  BX_PLATFORM_LINUX_NO_GL \
 	)
 
 ///
@@ -284,6 +286,7 @@
 	||  BX_PLATFORM_OSX        \
 	||  BX_PLATFORM_PS4        \
 	||  BX_PLATFORM_RPI        \
+	||  BX_PLATFORM_LINUX_NO_GL \
 	||  BX_PLATFORM_WINDOWS    \
 	||  BX_PLATFORM_WINRT      \
 	||  BX_PLATFORM_XBOXONE    \
@@ -388,12 +391,18 @@
 #	define BX_PLATFORM_NAME "WinRT"
 #elif BX_PLATFORM_XBOXONE
 #	define BX_PLATFORM_NAME "Xbox One"
+#elif BX_PLATFORM_LINUX_NO_GL
+#	define BX_PLATFORM_NAME "Linux (GLES)"
 #else
 #	error "Unknown BX_PLATFORM!"
 #endif // BX_PLATFORM_
 
 #if BX_CPU_ARM
 #	define BX_CPU_NAME "ARM"
+#   undef  BX_PLATFORM_LINUX
+#   define BX_PLATFORM_LINUX 0
+#   undef  BX_PLATFORM_LINUX_NO_GL
+#   define BX_PLATFORM_LINUX_NO_GL 1
 #elif BX_CPU_JIT
 #	define BX_CPU_NAME "JIT-VM"
 #elif BX_CPU_MIPS
diff -Naur mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bx/src/mutex.cpp mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bx/src/mutex.cpp
--- mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bx/src/mutex.cpp	2021-08-30 16:29:15.000000000 +0100
+++ mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bx/src/mutex.cpp	2021-08-30 21:40:21.495902311 +0100
@@ -18,7 +18,8 @@
 	|| BX_PLATFORM_IOS     \
 	|| BX_PLATFORM_OSX     \
 	|| BX_PLATFORM_PS4     \
-	|| BX_PLATFORM_RPI
+	|| BX_PLATFORM_RPI     \
+	|| BX_PLATFORM_LINUX_NO_GL
 #	include <pthread.h>
 #elif  BX_PLATFORM_WINDOWS \
 	|| BX_PLATFORM_WINRT   \
diff -Naur mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bx/src/os.cpp mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bx/src/os.cpp
--- mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bx/src/os.cpp	2021-08-30 16:29:15.000000000 +0100
+++ mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bx/src/os.cpp	2021-08-30 21:44:33.961836736 +0100
@@ -27,7 +27,8 @@
 	|| BX_PLATFORM_NX         \
 	|| BX_PLATFORM_OSX        \
 	|| BX_PLATFORM_PS4        \
-	|| BX_PLATFORM_RPI
+	|| BX_PLATFORM_RPI        \
+    || BX_PLATFORM_LINUX_NO_GL
 #	include <sched.h> // sched_yield
 #	if BX_PLATFORM_BSD       \
 	|| BX_PLATFORM_HAIKU     \
@@ -45,7 +46,8 @@
 #	if BX_PLATFORM_ANDROID
 #		include <malloc.h> // mallinfo
 #	elif   BX_PLATFORM_LINUX     \
-		|| BX_PLATFORM_RPI
+		|| BX_PLATFORM_RPI       \
+		|| BX_PLATFORM_LINUX_NO_GL
 #		include <stdio.h>  // fopen
 #		include <unistd.h> // syscall
 #		include <sys/syscall.h>
@@ -98,7 +100,8 @@
 #if BX_PLATFORM_WINDOWS
 		return ::GetCurrentThreadId();
 #elif  BX_PLATFORM_LINUX \
-	|| BX_PLATFORM_RPI
+	|| BX_PLATFORM_RPI   \
+	|| BX_PLATFORM_LINUX_NO_GL	
 		return (pid_t)::syscall(SYS_gettid);
 #elif  BX_PLATFORM_IOS \
 	|| BX_PLATFORM_OSX
@@ -119,7 +122,8 @@
 		struct mallinfo mi = mallinfo();
 		return mi.uordblks;
 #elif  BX_PLATFORM_LINUX \
-	|| BX_PLATFORM_HURD
+	|| BX_PLATFORM_HURD  \
+	|| BX_PLATFORM_LINUX_NO_GL
 		FILE* file = fopen("/proc/self/statm", "r");
 		if (NULL == file)
 		{
@@ -312,7 +316,8 @@
 	void* exec(const char* const* _argv)
 	{
 #if BX_PLATFORM_LINUX \
- || BX_PLATFORM_HURD
+ || BX_PLATFORM_HURD  \
+ || BX_PLATFORM_LINUX_NO_GL
 		pid_t pid = fork();
 
 		if (0 == pid)
diff -Naur mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bx/src/thread.cpp mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bx/src/thread.cpp
--- mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31.orig/3rdparty/bx/src/thread.cpp	2021-08-30 16:29:15.000000000 +0100
+++ mame-0b8f5a56162e839b94ecaa7124df58b471bc3c31/3rdparty/bx/src/thread.cpp	2021-08-30 21:47:18.289207471 +0100
@@ -22,12 +22,14 @@
 	|| BX_PLATFORM_IOS     \
 	|| BX_PLATFORM_OSX     \
 	|| BX_PLATFORM_PS4     \
-	|| BX_PLATFORM_RPI
+	|| BX_PLATFORM_RPI     \
+	|| BX_PLATFORM_LINUX_NO_GL
 #	include <pthread.h>
 #	if defined(__FreeBSD__)
 #		include <pthread_np.h>
 #	endif
-#	if BX_PLATFORM_LINUX && (BX_CRT_GLIBC < 21200)
+#	if BX_PLATFORM_LINUX \
+	|| BX_PLATFORM_LINUX_NO_GL && (BX_CRT_GLIBC < 21200)
 #		include <sys/prctl.h>
 #	endif // BX_PLATFORM_
 #elif  BX_PLATFORM_WINDOWS \
@@ -249,7 +251,8 @@
 		pthread_setname_np(_name);
 #elif (BX_CRT_GLIBC >= 21200) && ! BX_PLATFORM_HURD
 		pthread_setname_np(ti->m_handle, _name);
-#elif BX_PLATFORM_LINUX
+#elif BX_PLATFORM_LINUX \
+   || BX_PLATFORM_LINUX_NO_GL
 		prctl(PR_SET_NAME,_name, 0, 0, 0);
 #elif BX_PLATFORM_BSD
 #	if defined(__NetBSD__)
