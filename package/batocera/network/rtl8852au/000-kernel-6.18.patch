diff --git a/Makefile b/Makefile
index 7b8661e..e3286fd 100755
--- a/Makefile
+++ b/Makefile
@@ -1,5 +1,6 @@
 EXTRA_CFLAGS += $(USER_EXTRA_CFLAGS)
 EXTRA_CFLAGS += -O1
+EXTRA_CFLAGS += -w
 #EXTRA_CFLAGS += -O3
 #EXTRA_CFLAGS += -Wall
 #EXTRA_CFLAGS += -Wextra
diff --git a/core/crypto/sha256.c b/core/crypto/sha256.c
index ea5d9e3..54308ea 100644
--- a/core/crypto/sha256.c
+++ b/core/crypto/sha256.c
@@ -97,8 +97,10 @@ int hmac_sha256_vector(const u8 *key, size_t key_len, size_t num_elem,
  * @mac: Buffer for the hash (32 bytes)
  * Returns: 0 on success, -1 on failure
  */
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(6, 18, 0))
 int hmac_sha256(const u8 *key, size_t key_len, const u8 *data,
 		size_t data_len, u8 *mac)
 {
 	return hmac_sha256_vector(key, key_len, 1, &data, &data_len, mac);
 }
+#endif
diff --git a/core/crypto/sha256.h b/core/crypto/sha256.h
index 5219022..7700e5d 100644
--- a/core/crypto/sha256.h
+++ b/core/crypto/sha256.h
@@ -13,8 +13,10 @@
 
 int hmac_sha256_vector(const u8 *key, size_t key_len, size_t num_elem,
 		       const u8 *addr[], const size_t *len, u8 *mac);
+#if (LINUX_VERSION_CODE < KERNEL_VERSION(6, 18, 0))
 int hmac_sha256(const u8 *key, size_t key_len, const u8 *data,
 		size_t data_len, u8 *mac);
+#endif
 int sha256_prf(const u8 *key, size_t key_len, const char *label,
 	       const u8 *data, size_t data_len, u8 *buf, size_t buf_len);
 int sha256_prf_bits(const u8 *key, size_t key_len, const char *label,
