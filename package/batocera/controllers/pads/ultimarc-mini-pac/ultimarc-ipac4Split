#!/bin/sh

# "Ultimarc Mini-PAC" could be used for several controllers
# so, we may add an extra parameters in batocera.conf to switch the target. For now, we've only one target, so no option.

# Xtension 4 Player Ultimate Edition
nohup evsieve --input "${1}" persist=exit \
--block     key:up:2                   \
--map yield key:up:1      abs:hat0y:-1 \
--map yield key:up:0      abs:hat0y:0  \
--block     key:down:2                 \
--map yield key:down:1    abs:hat0y:1  \
--map yield key:down:0    abs:hat0y:0  \
--block     key:left:2                 \
--map yield key:left:1    abs:hat0x:-1 \
--map yield key:left:0    abs:hat0x:0  \
--block     key:right:2                \
--map yield key:right:1   abs:hat0x:1  \
--map yield key:right:0   abs:hat0x:0  \
--block     key:leftshift:2            \
--map yield key:leftshift btn:south    \
--block     key:z:2                    \
--map yield key:z         btn:east     \
--block     key:leftctrl:2             \
--map yield key:leftctrl  btn:west     \
--block     key:leftalt:2              \
--map yield key:leftalt   btn:north    \
--block     key:space:2                \
--map yield key:space     btn:tl       \
--block     key:x:2                    \
--map yield key:x         btn:tr       \
--block     key:1:2                    \
--map yield key:1         btn:start    \
--block     key:enter:2                \
--map yield key:enter     btn:select   \
--output name="Xtension 4P Player 1" abs:hat0y abs:hat0x btn:north btn:south btn:east btn:west btn:tl btn:tr btn:select btn:start \
--block     key:r:2                    \
--map yield key:r:1       abs:hat0y:-1 \
--map yield key:r:0       abs:hat0y:0  \
--block     key:f:2                    \
--map yield key:f:1       abs:hat0y:1  \
--map yield key:f:0       abs:hat0y:0  \
--block     key:d:2                    \
--map yield key:d:1       abs:hat0x:-1 \
--map yield key:d:0       abs:hat0x:0  \
--block     key:g:2                    \
--map yield key:g:1       abs:hat0x:1  \
--map yield key:g:0       abs:hat0x:0  \
--block     key:w:2                    \
--map yield key:w         btn:south    \
--block     key:i:2                    \
--map yield key:i         btn:east     \
--block     key:a:2                    \
--map yield key:a         btn:west     \
--block     key:s:2                    \
--map yield key:s         btn:north    \
--block     key:q:2                    \
--map yield key:q         btn:tl       \
--block     key:k:2                    \
--map yield key:k         btn:tr       \
--block     key:2:2                    \
--map yield key:2         btn:start    \
--block     key:6:2                    \
--map yield key:6         btn:select   \
--output name="Xtension 4P Player 2" btn:select btn:start abs:hat0y abs:hat0x btn:south btn:east btn:tr btn:west btn:north btn:tl \
--block     key:9:2                    \
--map yield key:9:1       abs:hat0y:-1 \
--map yield key:9:0       abs:hat0y:0  \
--block     key:0:2                    \
--map yield key:0:1       abs:hat0y:1  \
--map yield key:0:0       abs:hat0y:0  \
--block     key:j:2                    \
--map yield key:j:1       abs:hat0x:-1 \
--map yield key:j:0       abs:hat0x:0  \
--block     key:l:2                    \
--map yield key:l:1       abs:hat0x:1  \
--map yield key:l:0       abs:hat0x:0  \
--block     key:t:2                    \
--map yield key:t         btn:south    \
--block     key:slash:2                \
--map yield key:slash     btn:east     \
--block     key:o:2                    \
--map yield key:o         btn:west     \
--block     key:c:2                    \
--map yield key:c         btn:north    \
--block     key:3:2                    \
--map yield key:3         btn:start    \
--block     key:7:2                    \
--map yield key:7         btn:select   \
--output name="Xtension 4P Player 3" btn:select btn:start abs:hat0y abs:hat0x btn:south btn:east btn:tr btn:west btn:north btn:tl \
--block     key:y:2                    \
--map yield key:y:1       abs:hat0y:-1 \
--map yield key:y:0       abs:hat0y:0  \
--block     key:n:2                    \
--map yield key:n:1       abs:hat0y:1  \
--map yield key:n:0       abs:hat0y:0  \
--block     key:v:2                    \
--map yield key:v:1       abs:hat0x:-1 \
--map yield key:v:0       abs:hat0x:0  \
--block     key:u:2                    \
--map yield key:u:1       abs:hat0x:1  \
--map yield key:u:0       abs:hat0x:0  \
--block     key:h:2                    \
--map yield key:h         btn:south    \
--block     key:m:2                    \
--map yield key:m         btn:east     \
--block     key:b:2                    \
--map yield key:b         btn:west     \
--block     key:e:2                    \
--map yield key:e         btn:north    \
--block     key:4:2                    \
--map yield key:4         btn:start    \
--block     key:8:2                    \
--map yield key:8         btn:select   \
--output name="Xtension 4P Player 4" btn:select btn:start abs:hat0y abs:hat0x btn:south btn:east btn:tr btn:west btn:north btn:tl \
--block     key:5:2                    \
--map yield key:5         key:euro     \
--block     key:tab:2                  \
--map yield key:tab       key:menu     \
--block     key:p:2                    \
--map yield key:p         key:menu     \
--block     key:esc:2                  \
--map yield key:esc       key:exit     \
--output name="Xtension hotkeys" key:menu key:exit key:euro &
