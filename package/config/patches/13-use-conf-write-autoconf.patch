---
 conf.c   |    4 ++++
 mconf.c  |    2 +-
 qconf.cc |    2 ++
 3 files changed, 7 insertions(+), 1 deletion(-)

Index: config.clean/conf.c
===================================================================
--- config.clean.orig/conf.c
+++ config.clean/conf.c
@@ -611,6 +611,10 @@
 			fprintf(stderr, _("\n*** Error during writing of the Buildroot configuration.\n\n"));
 			exit(1);
 		}
+		if (conf_write_autoconf()) {
+			fprintf(stderr, _("\n*** Error during update of the Buildroot configuration.\n\n"));
+			return 1;
+		}
 	}
 	return 0;
 }
Index: config.clean/mconf.c
===================================================================
--- config.clean.orig/mconf.c
+++ config.clean/mconf.c
@@ -922,6 +922,6 @@
 			"\n\n"));
 	}
 
-	return 0;
+	return conf_write_autoconf();
 }
 
Index: config.clean/qconf.cc
===================================================================
--- config.clean.orig/qconf.cc
+++ config.clean/qconf.cc
@@ -1608,6 +1608,7 @@
 {
 	if (!conf_get_changed()) {
 		e->accept();
+		conf_write_autoconf();
 		return;
 	}
 	QMessageBox mb("qconf", _("Save configuration?"), QMessageBox::Warning,
@@ -1618,6 +1619,7 @@
 	switch (mb.exec()) {
 	case QMessageBox::Yes:
 		conf_write(NULL);
+		conf_write_autoconf();
 	case QMessageBox::No:
 		e->accept();
 		break;
